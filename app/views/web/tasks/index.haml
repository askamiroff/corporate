%h1.page-header= t :tasks

= link_to t('.new_task'), new_task_path, class: 'btn btn-default'
= render 'search_task_form', q: @q
%table.table.table-striped
  %thead
    %tr
      %th= sort_link @q, :title
      %th= sort_link @q, :responsible_user_email, han('task', :responsible_user)
      %th= han :task, :users
      %th= sort_link @q, :created_at
      %th= sort_link @q, :updated_at
      %th= sort_link @q, :comment_elapsed_time
      %th= t :operations
  %tbody
    - @tasks.each do |task|
      %tr
        %td= link_to task.title, task
        %td= task.responsible_user
        %td= task.users.map(&:to_s).join(', ')
        %td= task.created_at
        %td= task.updated_at
        %td= distance_of_time_in_words task.comment_elapsed_time unless task.comment_elapsed_time.zero?
        %td
          - if task.creator_id == current_user.id
            = link_to t(:edit), edit_task_path(task)
            = link_to t(:delete), task_path(task), method: :delete, data: { confirm: t(:are_you_sure?) }

= paginate @tasks, theme: 'twitter-bootstrap-3'
